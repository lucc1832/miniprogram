<view class="wrap">
  <view wx:if="{{!good}}" class="muted center">åŠ è½½ä¸­â€¦</view>

  <view wx:else class="card head">
    <view class="name">{{good.name}}</view>
    <view class="muted">{{good.categoryName}} Â· {{good.status==='archived'?'å½’æ¡£':'ä½¿ç”¨ä¸­'}}</view>
    
    <!-- åŒºåˆ†æ˜¾ç¤ºï¼šåˆ°æœŸä¾¿ç­¾ -->
    <block wx:if="{{good.type === 'expire' || (!good.type && good.buyPrice == null)}}">
      <view class="line muted">
        <text> è´­ä¹°æ—¥ï¼š{{good.buyDate}}</text>
        <text wx:if="{{good.expireEnabled && good.expireDate}}"> åˆ°æœŸï¼š{{good.expireDate}}</text>
      </view>
    </block>

    <!-- åŒºåˆ†æ˜¾ç¤ºï¼šä½¿ç”¨æˆæœ¬ -->
    <block wx:else>
      <view class="line muted">
        <text wx:if="{{good.buyPrice!=null}}">è´­ä¹°ä»·ï¼šÂ¥{{good.buyPrice}}</text>
      </view>
      <view class="line muted" wx:if="{{good.buyPrice!=null}}">
        <text>æ—¥å‡æˆæœ¬ï¼šÂ¥{{dailyCostStr}}/å¤©</text>
        <text wx:if="{{usedDays>0}}"> Â· ä½¿ç”¨å¤©æ•°ï¼š{{usedDays}} å¤©</text>
      </view>
      <view class="line muted">
        <text> è´­ä¹°æ—¥ï¼š{{good.buyDate}}</text>
      </view>
    </block>
  </view>

  <!-- ROI Stats: ä»…å½“ç±»å‹ä¸º roi æˆ–æœ‰ä»·æ ¼æ—¶æ˜¾ç¤º -->
  <view wx:if="{{good && (good.type === 'roi' || good.buyPrice!=null)}}" class="card stats">
    <view class="stat-row">
      <view class="stat">
        <view class="muted">{{profitMode ? 'æ”¶ç›Š' : 'å·®é¢'}}</view>
        <view class="big">Â¥{{profitMode ? profitStr : roiGap}}</view>
      </view>
    </view>
    <view class="bar">
      <view class="bar-inner" style="width: {{roiPct}}%">
         <view class="bar-dot"></view>
      </view>
    </view>
    <view class="muted">å›æœ¬è¿›åº¦ï¼š{{roiPct}}% <text wx:if="{{good.breakevenAt}}">Â· å›æœ¬æ—¥ï¼š{{good.breakevenAt}}</text></view>
    <view class="muted" wx:if="{{profitMode}}">æ¯å¤šä½¿ç”¨ä¸€å¤©èµšï¼šÂ¥{{profitPerDayStr}}</view>
  </view>

  <view class="card actions">
    <view class="btn-pill btn-edit" bindtap="goEdit">
      <text class="btn-ico">âœï¸</text>
      <text>ç¼–è¾‘</text>
    </view>

    <view class="btn-pill btn-archive" bindtap="toggleArchive">
      <text class="btn-ico">{{good && good.status==='archived' ? 'ğŸ“‚' : 'ğŸ—‚ï¸'}}</text>
      <text>{{good && good.status==='archived' ? 'æ¢å¤ä½¿ç”¨' : 'å½’æ¡£'}}</text>
    </view>
  </view>
</view>
