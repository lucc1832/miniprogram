<view class="wrap">
  <view class="user-card">
    <button class="avatar-wrapper" open-type="chooseAvatar" bindchooseavatar="onChooseAvatar">
      <image class="avatar" src="{{userInfo.avatarUrl || defaultAvatar}}" mode="aspectFill"></image>
      <view class="edit-icon">ğŸ“·</view>
    </button>
    <view class="user-info">
      <input type="nickname" class="nickname-input" placeholder="ç‚¹å‡»è®¾ç½®æ˜µç§°" value="{{userInfo.nickName}}" bindchange="onNicknameInput" />
      <view class="member-badge {{memberInfo.isMember ? 'active' : ''}}">
        <text class="badge-icon">ğŸ‘‘</text>
        <text>{{memberInfo.isMember ? memberInfo.name : 'æœªå¼€é€šä¼šå‘˜'}}</text>
      </view>
    </view>
    <view class="status-tag {{hasUserInfo ? 'online' : 'offline'}}">
      {{hasUserInfo ? 'å·²ç™»å½•' : 'æœªç™»å½•'}}
    </view>
  </view>

  <view class="stats-card">
    <view class="stat-item">
      <text class="stat-num">{{stats.daysJoined}}</text>
      <text class="stat-label">é™ªä¼´å¤©æ•°</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-num">{{stats.totalRecords}}</text>
      <text class="stat-label">ç´¯è®¡è®°å½•</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-num">{{stats.streakDays}}</text>
      <text class="stat-label">è¿ç»­æ‰“å¡</text>
    </view>
  </view>

  <view class="menu-list">
    <view class="menu-group" wx:for="{{menuGroups}}" wx:key="title">
      <view class="group-title" wx:if="{{item.title}}">{{item.title}}</view>
      <view class="group-content">
        <view class="menu-item" wx:for="{{item.items}}" wx:key="name" wx:for-item="menu" bindtap="handleMenuClick" data-item="{{menu}}">
          <view class="item-left">
            <text wx:if="{{menu.icon}}" class="item-icon">{{menu.icon}}</text>
            <text class="item-name {{menu.danger ? 'text-danger' : ''}}">{{menu.name}}</text>
          </view>
          <view class="item-right">
            <text wx:if="{{!menu.type}}" class="item-desc">{{menu.desc || ''}}</text>
            <text wx:if="{{!menu.type}}" class="arrow">â€º</text>
            <switch wx:if="{{menu.type === 'switch'}}" checked="{{settings[menu.key]}}" bindchange="onSwitchChange" data-key="{{menu.key}}" color="#F4C430" style="transform: scale(0.8);" />
            <picker wx:if="{{menu.type === 'time'}}" mode="time" value="{{settings[menu.key]}}" bindchange="onTimeChange" data-key="{{menu.key}}">
              <view class="picker-val">{{settings[menu.key]}} â€º</view>
            </picker>
          </view>
        </view>
      </view>
    </view>
  </view>

  <view class="footer-info">
    <text>Kitchen v1.0.0</text>
  </view>
</view>
