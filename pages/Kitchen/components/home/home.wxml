<view class="home-container" style="padding-top: {{statusBarHeight + navBarHeight}}px;">
  <!-- Header -->
  <view class="custom-header" style="top: {{statusBarHeight}}px; height: {{navBarHeight}}px;">
    <text class="header-title">今天吃什么？</text>
  </view>

  <!-- State 1: Empty -->
  <view class="state-container empty" wx:if="{{todayStatus === 'empty'}}">
    <view class="illustration">
      <text class="emoji">🤔</text>
    </view>
    <text class="state-title">今天还没想好吃什么...</text>
    <text class="state-sub">去挑几个喜欢的菜吧</text>
    <button class="action-btn primary" bindtap="goToMenu">去点菜</button>
  </view>

  <!-- State 2: Planned -->
  <view class="state-container planned" wx:if="{{todayStatus === 'planned'}}">
    <text class="state-title">今日菜单</text>
    <view class="menu-list-card">
      <view class="menu-item" wx:for="{{todayMenu.items}}" wx:key="name">
        <image class="menu-img" src="{{item.img}}" mode="aspectFill"></image>
        <text class="menu-name">{{item.name}}</text>
      </view>
    </view>
    <button class="action-btn success" bindtap="completeCooking">开始做饭 & 完成</button>
  </view>

  <!-- State 3: Completed -->
  <view class="state-container completed" wx:if="{{todayStatus === 'completed'}}">
    <view class="illustration">
      <text class="emoji">🎉</text>
    </view>
    <text class="state-title">今日打卡成功！</text>
    <text class="state-sub">唯有爱与美食不可辜负</text>
    
    <!-- Mini Heatmap -->
    <view class="mini-heatmap">
      <view class="heat-day" wx:for="{{heatData}}" wx:key="date">
        <view class="heat-circle {{item.active ? 'active' : ''}}">
          <text wx:if="{{item.active}}">✔</text>
        </view>
        <text class="heat-date">{{item.isToday ? '今' : item.date}}</text>
      </view>
    </view>

    <button class="action-btn secondary" bindtap="goToDiary">查看食记</button>
  </view>
</view>