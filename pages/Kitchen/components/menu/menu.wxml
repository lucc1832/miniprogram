<view class="menu-container" style="padding-top: {{statusBarHeight + navBarHeight}}px;">
  <!-- Custom Header -->
  <view class="custom-header" style="top: {{statusBarHeight}}px; height: {{navBarHeight}}px;">
    <view class="search-bar">
      <icon type="search" size="14" color="#999"/>
      <input placeholder="输入菜名" placeholder-class="ph-color" />
    </view>
    <view class="fav-btn">
      <text>♡ 我的收藏</text>
    </view>
    <!-- Capsule Placeholder -->
  </view>

  <!-- Categories -->
  <scroll-view scroll-x class="category-scroll" enable-flex>
    <view class="cat-item {{activeCat === 'all' ? 'active' : ''}}" bindtap="switchCat" data-cat="all">全部</view>
    <view class="cat-item {{activeCat === 'meat' ? 'active' : ''}}" bindtap="switchCat" data-cat="meat">🥩 荤</view>
    <view class="cat-item {{activeCat === 'veg' ? 'active' : ''}}" bindtap="switchCat" data-cat="veg">🥬 素</view>
    <view class="cat-item {{activeCat === 'egg' ? 'active' : ''}}" bindtap="switchCat" data-cat="egg">🥚 蛋</view>
    <view class="cat-item {{activeCat === 'soup' ? 'active' : ''}}" bindtap="switchCat" data-cat="soup">🥣 汤</view>
    <view class="cat-item {{activeCat === 'main' ? 'active' : ''}}" bindtap="switchCat" data-cat="main">🍚 主食</view>
  </scroll-view>

  <!-- Notification -->
  <view class="notice-bar">
    <text class="bell-icon">🔔</text>
    <text class="notice-text">「厨房-添加菜品</text>
  </view>

  <!-- Food Grid -->
  <scroll-view scroll-y class="food-scroll">
    <view class="food-grid">
      <view class="food-item" wx:for="{{foods}}" wx:key="name">
        <view class="food-img-wrapper" bindtap="onShowDetail" data-food="{{item}}">
          <image class="food-img" src="{{item.img}}" mode="aspectFill"></image>
        </view>
        <view class="food-info">
          <view class="chef-icon">👨‍🍳</view>
          <text class="food-name">{{item.name}}</text>
          <view class="add-btn" catchtap="addToCart" data-food="{{item}}" hover-class="add-btn-pressed">+</view>
        </view>
      </view>
    </view>
    <view class="padding-bottom-placeholder"></view>
  </scroll-view>

  <!-- Floating Cart Button -->
  <view class="cart-float-btn" wx:if="{{cart.length > 0}}" bindtap="showCart" hover-class="cart-float-btn-pressed">
    <text class="cart-icon">🛒</text>
    <view class="cart-badge">{{cart.length}}</view>
  </view>

  <!-- Recipe Detail Modal -->
  <view class="modal-mask" wx:if="{{showDetail}}" bindtap="closeDetail">
    <view class="modal-content" catchtap="true">
      <view class="modal-header">
        <text class="modal-title">{{selectedFood.name}}</text>
        <text class="close-btn" bindtap="closeDetail">×</text>
      </view>
      <image class="detail-img" src="{{selectedFood.img}}" mode="aspectFill"></image>
      <view class="detail-desc">{{selectedFood.desc}}</view>
      <view class="detail-actions">
        <button class="action-btn fav" bindtap="toggleFav">收藏</button>
        <button class="action-btn add" bindtap="addToCart" data-food="{{selectedFood}}">加入清单</button>
      </view>
    </view>
  </view>

  <!-- Cart Modal -->
  <view class="modal-mask" wx:if="{{showCartModal}}" bindtap="closeCart">
    <view class="modal-content bottom-sheet" catchtap="true">
      <view class="modal-header">
        <text class="modal-title">点餐清单</text>
        <text class="clear-btn" bindtap="clearCart">清空</text>
      </view>
      <scroll-view scroll-y class="cart-list">
        <view class="cart-item" wx:for="{{cart}}" wx:key="index">
          <text>{{item.name}}</text>
          <text>x1</text>
        </view>
      </scroll-view>
      <button class="submit-btn" bindtap="submitOrder">加入今日菜单</button>
    </view>
  </view>
</view>
